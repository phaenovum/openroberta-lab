IMPORTANT_CHANGE
================

Some time ago we detected a considerably increase of size and slowdown in build for the `openrobertalab`. The reason was
a large amount of resources used by the crosscompiler, which had been added to the repository. If you
consider, that they are not even generated by us, but only copied, it is obvious, that we want to remove them from
our source repository, and not only in the current branch, but also from the complete history. This has a consequence:

* freeze the old repository,
* clean it up, and
* create a new one.

This has been done at 15.4.2019.

Before the cleanup the command git clone https://github.com/OpenRoberta/robertalab.git created a repository of size 1.66 GB
The unwanted files are especially large resources for Arduinos builds. As noted above, removing them rewrites the history.
Git has support for that, but much more efficient is the scala program BFG
(see https://help.github.com/en/articles/removing-sensitive-data-from-a-repository but there is much more info about that).

First the crosscompiler resources are moved to a new repository `ora-cc-rsc`, which will be "almost" read-only, as these files don't
change often compared to the sources of the lab. The repository name is short (I'd prefer "openrobertalab-crosscompiler-resources"),
but we have a problem: path names of some (mainly Arduino) resources are very long and we got messages from developers using
our sources on windows systems, that the maximal path length (260, also in new windows versions) is exceeded and the build crashes. Developer
working with linux don't face this problem, so it was unnoticed for some time. We hope, that by a short repository name (usually
also the name of the directory of the local copy of the remote repository) and the change of the prefix from
"OpenRobertaParent/RobotArdu/resources" to "RobotArdu" will remedy that problem. If not, please file an issue.

Then the unwanted resources are removed. We get the "same" history for the repository, but different commit ids, of course.

AS A CONSEQUENCE EVERYBODY HAS TO DO A FRESH CLONE OF THE REPOSITORY NOW CALLED `openroberta-lab`.

The old repository stays, so nothing is lost, but it is frozen.

Local changes which are NOT committed to the remote repository before the change (either in "develop" or a private remote branch) can ONLY be
applied as PATCHES to the new repository. This is inconvenient, of course, but we cannot avoid that.

The following commands have been executed (on a windows machine using the git bash):

```bash
cd /D/git
git clone https://github.com/OpenRoberta/robertalab.git # get the actual state of the old repo
GIT=/D/git/robertalab/
BFG=/D/downloads/bfg-1.13.0.jar

cd $GIT
git fetch --all  # get all remote branches
git fetch --tags # get all remote tags

cd Resources
rm -rf USBinstaller
git add --all
git commit -m "rm USBinstaller. Not needed resources"
java -jar $BFG --delete-folders USBinstaller $GIT

cd ../OpenRobertaParent
set Robot*
for F do
  cd $F 
  rm -rf resources 
  cd ..
done
git add --all
git commit -m "rm all robot resources. Moved to repo ora-cc-rsc"
for F do
  java -jar $BFG --delete-folders resources $GIT
done
git reflog expire --expire=now --all && git gc --prune=now --aggressive
```

The size of the repository is 415 MB now. You get the 40 largest files of the repository by executing:

```bash
git ls-tree -r -l --abbrev --full-name HEAD | sort -n -r -k 4 | head -n 40
```

In a next step the directory "OpenRobertaParent" has been removed. This fits better with the maven conventions.

Some changes in the sources are necessary to get access to the directory, the crosscompiler resources have been moved to.
This includes the property files of all robot-plugins and the server.properties.

The wiki has been moved to the new repository. The issues will stay for a short time with the old repository and will be moved step by step
to get a good overview of requests and errors. 




